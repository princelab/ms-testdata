<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:protx="http://regis-web.systemsbiology.net/protXML">
<xsl:variable name="tab"><xsl:text>&#x09;</xsl:text></xsl:variable>
<xsl:variable name="newline"><xsl:text>
</xsl:text></xsl:variable><xsl:variable name="libra_quant"><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='libra']">1</xsl:if><xsl:if test="not(/protx:protein_summary/protx:analysis_summary[@analysis='libra'])">0</xsl:if></xsl:variable>
<xsl:template match="protx:protein_summary">
<HTML><BODY BGCOLOR="white" OnLoad="self.focus()"><PRE>
<HEAD><TITLE>ProteinProphet protXML Viewer (TPP v2.9 GALE rev.2, Build 200703091101)</TITLE></HEAD><table width="100%" border="3" BGCOLOR="#AAAAFF" style="font-family: 'Courier New', Courier, mono; font-size: 10pt;"><tr><td align="center">
<form method="GET" action="/tpp/cgi-bin/protxml2html.pl">
<input type="submit" value="Restore Original"/>
<input type="hidden" name="restore" value="yes"/>
<input type="hidden" name="xmlfile" value="/work/tpp-data/interact-opd1_mods-prot.xml"/>
</form></td><td align="center"><pre>ProteinProphet<sup><font size="3">&#xAE;</font></sup> protXML Viewer</pre>A.Keller   2.23.05</td><td align="center"><form method="GET" target="Win1" action="/tpp/cgi-bin/protxml2html.pl">
<pre><input type="submit" value="Write Displayed Data Subset to File" /><pre><xsl:value-of select="$newline"/></pre><input type="hidden" name="xmlfile" value="/work/tpp-data/interact-opd1_mods-prot.xml"/>
<input type="hidden" name="min_pepprob" value="0"/><input type="hidden" name="show_groups" value="yes"/><input type="hidden" name="num_unique_peps" value="show"/><input type="hidden" name="tot_num_peps" value="show"/><input type="hidden" name="show_adjusted_asap" value="yes"/><input type="hidden" name="adj_asap" value="yes"/><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='asapratio_pvalue']"><input type="hidden" name="adj_asap" value="yes"/></xsl:if><input type="hidden" name="quant_light2heavy" value="true"/>file name: <input type="text" name="outfile" value="" size="20" maxlength="100"/>.shtml</pre>
</form></td></tr></table><form method="GET" action="/tpp/cgi-bin/protxml2html.pl"><table width="100%" border="3" BGCOLOR="#AAAAFF"><tr><td><pre><input type="submit" value="Filter / Sort / Discard checked entries" /><xsl:text>     </xsl:text><xsl:if test="protx:dataset_derivation/@generation_no='0'"><a target="Win1" href="/tpp/cgi-bin/show_sens_err.pl?xmlfile=/work/tpp-data/interact-opd1_mods-prot.xml&amp;xslt=/bin/nice -19 /usr/bin/xsltproc&amp;">Sensitivity/Error Info</a></xsl:if><xsl:if test="protx:dataset_derivation/@generation_no &gt;'0'"><a target="Win1" href="/tpp/cgi-bin/show_dataset_derivation.pl?xmlfile=/work/tpp-data/interact-opd1_mods-prot.xml&amp;xslt=/bin/nice -19 /usr/bin/xsltproc">Dataset Derivation Info</a></xsl:if><xsl:text>     </xsl:text><a target="Win1" href="/tpp/cgi-bin/more_anal.pl?xmlfile=/work/tpp-data/interact-opd1_mods-prot.xml&amp;xslt=/bin/nice -19 /usr/bin/xsltproc&amp;shtml=yes&amp;helpdir=/tpp/html/">More Analysis Info</a><xsl:text>     </xsl:text><a target="Win1" href="/tpp/cgi-bin/show_help.pl?help_dir=/tpp/html/">Help</a><br/><xsl:value-of select="$newline"/><xsl:text> </xsl:text>sort by: <input type="radio" name="sort" value="none" CHECKED="yes"/>index<input type="radio" name="sort" value="prob" />probability <input type="radio" name="sort" value="protein" />protein <input type="radio" name="sort" value="coverage" />coverage<xsl:if test="not(/protx:protein_summary/protx:protein_summary_header/@total_no_spectrum_ids)"> <input type="radio" name="sort" value="numpeps" />num peps</xsl:if><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@total_no_spectrum_ids"> <input type="radio" name="sort" value="spectrum_ids" />share of spectrum id's</xsl:if><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress'] and count(/protx:protein_summary/protx:protein_group/protx:protein/protx:analysis_result[@analysis='asapratio']) &gt; '0'"> <br/><xsl:value-of select="$newline"/><xsl:text>          </xsl:text></xsl:if><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress']">  <input type="radio" name="sort" value="xpress_desc" />xpress desc <input type="radio" name="sort" value="xpress_asc" />xpress asc</xsl:if><xsl:if test="count(/protx:protein_summary/protx:protein_group/protx:protein/protx:analysis_result[@analysis='asapratio']) &gt; '0'"> <input type="radio" name="sort" value="asap_desc" />asap desc <input type="radio" name="sort" value="asap_asc" />asap asc<xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='asapratio_pvalue']"> <input type="radio" name="sort" value="pvalue" />pvalue</xsl:if></xsl:if><br/><xsl:value-of select="$newline"/><xsl:text> </xsl:text>min probability: <INPUT TYPE="text" NAME="min_prob" VALUE="" SIZE="3" MAXLENGTH="15"/><xsl:text>   </xsl:text><br/><xsl:value-of select="$newline"/><xsl:text> </xsl:text>protein groups: <input type="radio" name="show_groups" value="show" CHECKED="yes"/>show  <input type="radio" name="show_groups" value="hide" />hide     annotation: <input type="radio" name="show_annot" value="show" CHECKED="yes"/>show  <input type="radio" name="show_annot" value="hide" />hide     peptides: <input type="radio" name="show_peps" value="show" CHECKED="yes"/>show  <input type="radio" name="show_peps" value="hide" />hide  <br/><xsl:value-of select="$newline"/><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress']"><xsl:text> </xsl:text>exclude w/o XPRESS Ratio: <input type="checkbox" name="filter_xpress" value="yes" />  min XPRESS Ratio: <INPUT TYPE="text" NAME="min_xpress" VALUE="" SIZE="3" MAXLENGTH="8"/>  max XPRESS Ratio: <INPUT TYPE="text" NAME="max_xpress" VALUE="" SIZE="3" MAXLENGTH="8"/><xsl:if test="count(/protx:protein_summary/protx:protein_group/protx:protein/protx:ASAPRatio) &gt; '0'">  ASAPRatio consistent: <input type="checkbox" name="asap_xpress" value="yes" /></xsl:if><br/><xsl:value-of select="$newline"/></xsl:if><xsl:if test="count(/protx:protein_summary/protx:protein_group/protx:protein/protx:analysis_result[@analysis='asapratio']) &gt; '0'"><xsl:text> </xsl:text>exclude w/o ASAPRatio: <input type="checkbox" name="filter_asap" value="yes" />  min ASAPRatio: <INPUT TYPE="text" NAME="min_asap" VALUE="" SIZE="3" MAXLENGTH="8"/>  max ASAPRatio: <INPUT TYPE="text" NAME="max_asap" VALUE="" SIZE="3" MAXLENGTH="8"/><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='asapratio_pvalue']">  max pvalue: <INPUT TYPE="text" NAME="max_pvalue" VALUE="" SIZE="3" MAXLENGTH="8"/>  adjusted: <input type="checkbox" name="show_adjusted_asap" value="yes" CHECKED="yes"/><input type="hidden" name="adj_asap" value="yes"/><input type="submit" name="action" value="Recompute p-values"/></xsl:if><br/><xsl:value-of select="$newline"/></xsl:if><xsl:text> </xsl:text>exclude degen peps: <input type="checkbox" name="no_degens" value="yes" />  exclude charge: <input type="checkbox" name="ex1" value="yes" />1+<input type="checkbox" name="ex2" value="yes" />2+<input type="checkbox" name="ex3" value="yes" />3+<xsl:text>   </xsl:text>min pep prob: <INPUT TYPE="text" NAME="min_pep_prob" VALUE="" SIZE="3" MAXLENGTH="15"/><xsl:text>   </xsl:text> min num tol term: <INPUT TYPE="text" NAME="min_ntt" VALUE="" SIZE="1" MAXLENGTH="1"/><xsl:text> </xsl:text><br/><xsl:value-of select="$newline"/><xsl:text> </xsl:text>include aa: <INPUT TYPE="text" NAME="pep_aa" VALUE="" SIZE="5" MAXLENGTH="15"/>   mark aa: <INPUT TYPE="text" NAME="mark_aa" VALUE="" SIZE="5" MAXLENGTH="15"/>   NxS/T: <input type="checkbox" name="glyc" value="yes" /><xsl:text>   </xsl:text>protein text: <input type="text" name="text1" value="" size="12" maxlength="24"/><xsl:text>   </xsl:text>export to excel: <input type="checkbox" name="excel" value="yes" />
<input type="hidden" name="restore" value="no"/>
<input type="hidden" name="xmlfile" value="/work/tpp-data/interact-opd1_mods-prot.xml"/>
<input type="hidden" name="exclusions" value=""/>
<input type="hidden" name="inclusions" value=""/>
<input type="hidden" name="pexclusions" value=""/>
<input type="hidden" name="pinclusions" value=""/>
<input type="hidden" name="xml_input" value="1"/><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='asapratio_pvalue']"><input type="hidden" name="asapratio_pvalue" value="yes"/></xsl:if><pre><xsl:value-of select="$newline"/></pre><br/><xsl:value-of select="$newline"/> full menu <input type="checkbox" name="full_menu" value="yes"/>      show discarded entries <input type="checkbox" name="discards" value="yes" />    clear manual discards/restores <input type="checkbox" name="clear" value="yes"/><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress'] or /protx:protein_summary/protx:analysis_summary[@analysis='asapratio']"><input type="hidden" name="quant_light2heavy" value="true"/></xsl:if><input type="hidden" name="coverage" value=""/><input type="hidden" name="initial_probability" value=""/><input type="hidden" name="prot_number" value=""/><input type="hidden" name="num_tol_term" value=""/><input type="hidden" name="libra" value=""/><input type="hidden" name="peptide_group_designator" value=""/><input type="hidden" name="xpress" value=""/><input type="hidden" name="n_instances" value=""/><input type="hidden" name="protein" value=""/><input type="hidden" name="peptide_sequence" value=""/><input type="hidden" name="n_sibling_peptides_bin" value=""/><input type="hidden" name="nsp_adjusted_probability" value=""/><input type="hidden" name="weight" value=""/><input type="hidden" name="asapratio" value=""/><input type="hidden" name="group_number" value=""/><input type="hidden" name="annotation" value=""/><input type="hidden" name="quant_light2heavy" value="true"/><input type="hidden" name="num_unique_peps" value="show"/><input type="hidden" name="tot_num_peps" value="show"/><input type="hidden" name="xpress_display" value="show"/>
<input type="hidden" name="asap_display" value="show"/>
<xsl:value-of select="$newline"/></pre></td></tr></table>
<font color="red"><xsl:value-of select="count(protx:protein_group[(@probability &gt;= '0')])"/> entries (<xsl:value-of select="count(protx:protein_group[(@probability &gt;= '0' and (count(protx:protein[@group_sibling_id = 'a']/protx:peptide[@is_contributing_evidence='Y'])&lt;='1'))])"/> single hits) retrieved from <A href="//work/tpp-data/interact-opd1_mods-prot.xml"><font color="red">/work/tpp-data/interact-opd1_mods-prot.xml</font></A></font><br/><xsl:value-of select="$newline"/><pre><br/><xsl:value-of select="$newline"/></pre><FONT COLOR="990000">* indicates peptide corresponding to unique protein entry</FONT><br/><xsl:value-of select="$newline"/><table cellpadding="0" bgcolor="white" style="font-family: 'Courier New', Courier, mono; font-size: 10pt;">
<xsl:comment>start</xsl:comment><br/><xsl:value-of select="$newline"/>

<xsl:apply-templates select="protx:protein_group">
<xsl:sort select="@group_number" data-type="number"/>
</xsl:apply-templates>
</table>
</form></PRE></BODY></HTML>
</xsl:template>
<xsl:template match="protx:protein_group">
<xsl:variable name="group_member" select="count(protx:protein)"/><xsl:variable name="group_number" select="@group_number"/><xsl:variable name="parental_group_number" select="parent::node()/@group_number"/><xsl:variable name="sole_prot" select="protx:protein/@protein_name"/><xsl:variable name="database" select="parent::node()/protx:protein_summary_header/@reference_database"/><xsl:variable name="peps1" select="protx:protein/@unique_stripped_peptides"/><tr><td height="8" colspan="10"><xsl:text>     </xsl:text></td></tr><tr><td><nobr><input type="checkbox" name="excl{$group_number}" style="height: 15px; width: 15px;" value="yes"/> <xsl:value-of select="@group_number"/><xsl:text> </xsl:text></nobr></td><td colspan="10"><xsl:if test="$group_member &gt;'1'">PROTEIN GROUP: <xsl:value-of select="@pseudo_name"/></xsl:if><xsl:if test="$group_member='1'"><A TARGET="Win1" HREF="/tpp/cgi-bin/comet-fastadb.cgi?Ref={$sole_prot}&amp;Db={$database}&amp;Pep={$peps1}"><xsl:value-of select="$sole_prot"/></A><xsl:for-each select="protx:protein/protx:indistinguishable_protein"><xsl:variable name="indist_prot" select="@protein_name"/><xsl:text> </xsl:text> <A TARGET="Win1" HREF="/tpp/cgi-bin/comet-fastadb.cgi?Ref={$indist_prot}&amp;Db={$database}&amp;Pep={$peps1}"><xsl:value-of select="$indist_prot"/><xsl:if test="(position() + 2) mod 6 = '1'"><br/><xsl:value-of select="$newline"/></xsl:if></A></xsl:for-each></xsl:if><xsl:text> </xsl:text><xsl:text> </xsl:text><font color="red"><b><xsl:value-of select="@probability"/></b></font></td></tr><xsl:apply-templates select="protx:protein"></xsl:apply-templates><tr><td><xsl:text>     </xsl:text></td></tr></xsl:template>
<xsl:template match="protx:protein"><xsl:variable name="group_number" select="@group_number"/><xsl:variable name="mult_prot" select="@protein_name"/><xsl:variable name="database2" select="parent::node()/parent::node()/protx:protein_summary_header/@reference_database"/><xsl:variable name="peps2" select="@unique_stripped_peptides"/><xsl:variable name="file" select="/protx:protein_summary/protx:protein_summary_header/@source_files"/><xsl:variable name="filextn"><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@source_file_xtn">_<xsl:value-of select="/protx:protein_summary/protx:protein_summary_header/@source_file_xtn"/></xsl:if></xsl:variable><xsl:variable name="asap_ind" select="protx:analysis_result[@analysis='asapratio']/protx:ASAPRatio/@index"/><xsl:variable name="prot_number"><xsl:value-of select="parent::node()/@group_number"/><xsl:if test="count(parent::node()/protx:protein) &gt;'1'"><xsl:value-of select="@group_sibling_id"/></xsl:if></xsl:variable><xsl:variable name="pvalpngfile" select="/protx:protein_summary/protx:analysis_summary[@analysis='asapratio_pvalue']/protx:ASAP_pvalue_analysis_summary/@analysis_distribution_file"/><xsl:variable name="peptide_string" select="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@peptide_string"/><xsl:variable name="xratio" select="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@ratio_mean"/><xsl:variable name="xstd" select="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@ratio_standard_dev"/><xsl:variable name="xnum" select="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@ratio_number_peptides"/><xsl:variable name="min_pep_prob" select="/protx:protein_summary/protx:analysis_summary[@analysis='xpress']/protx:XPress_analysis_summary/@min_peptide_probability"/><xsl:variable name="source" select="/protx:protein_summary/protx:protein_summary_header/@source_files"/><xsl:variable name="heavy2light"><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress']/protx:XPress_analysis_summary/@reference_isotope='heavy'">0</xsl:if><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress']/protx:XPress_analysis_summary/@reference_isotope='light'">1</xsl:if></xsl:variable><xsl:if test="count(parent::node()/protx:protein) &gt; '1'"><xsl:if test="not(@group_sibling_id='a')"><tr><td><xsl:text>     </xsl:text></td></tr></xsl:if><tr><td height="8" colspan="10"><xsl:text>     </xsl:text></td></tr><tr><td><nobr><xsl:if test="count(parent::node()/protx:protein) = '1'"><input type="checkbox" name="excl{$group_number}" style="height: 15px; width: 15px;" value="yes"/> <xsl:value-of select="@group_number"/><xsl:text> </xsl:text></xsl:if><xsl:if test="count(parent::node()/protx:protein) &gt; '1'"><input type="checkbox" name="pexcl{$prot_number}" style="height: 15px; width: 15px;" value="yes"/> <xsl:value-of select="@group_sibling_id"/><xsl:text> </xsl:text></xsl:if></nobr></td><td colspan="10"><A TARGET="Win1" HREF="/tpp/cgi-bin/comet-fastadb.cgi?Ref={$mult_prot}&amp;Db={$database2}&amp;Pep={$peps2}"><xsl:value-of select="$mult_prot"/></A><xsl:for-each select="protx:indistinguishable_protein"><xsl:variable name="indist_prot" select="@protein_name"/><xsl:text> </xsl:text><xsl:text> </xsl:text> <A TARGET="Win1" HREF="/tpp/cgi-bin/comet-fastadb.cgi?Ref={$indist_prot}&amp;Db={$database2}&amp;Pep={$peps2}"><xsl:value-of select="$indist_prot"/><xsl:if test="(position() + 2) mod 6 = '1'"><br/><xsl:value-of select="$newline"/></xsl:if></A></xsl:for-each><xsl:text> </xsl:text><xsl:text> </xsl:text>  <font color="#B40000"><xsl:value-of select="@probability"/></font></td></tr></xsl:if><tr><td colspan="12"><table cellpadding="0" bgcolor="white" style="font-family: 'Courier New', Courier, mono; font-size: 10pt;"><tr><td width="150"><xsl:if test="@percent_coverage &gt;'0'"><xsl:if test="@n_indistinguishable_proteins &gt; '1'">max<xsl:text> </xsl:text></xsl:if>coverage: <xsl:value-of select="@percent_coverage"/>%</xsl:if></td><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='libra']"><td width="250"><xsl:if test="protx:analysis_result[@analysis='libra']">LIBRA<xsl:text> </xsl:text>(<xsl:value-of select="protx:analysis_result[@analysis='libra']/protx:libra_result/@number"/>)<xsl:for-each select="protx:analysis_result[@analysis='libra']/protx:libra_result/protx:intensity"><br/><xsl:value-of select="@mz"/>:<xsl:text> </xsl:text><xsl:value-of select="@ratio"/><xsl:text> </xsl:text> +-<xsl:text> </xsl:text><xsl:value-of select="@error"/><xsl:text> </xsl:text></xsl:for-each></xsl:if></td></xsl:if><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress']"><td width="350"><xsl:if test="protx:analysis_result[@analysis='xpress']">XPRESS: <a target="Win2" href="/tpp/cgi-bin/XPressCGIProteinDisplayParser.cgi?xslt=/bin/nice -19 /usr/bin/xsltproc&amp;cgihome=/tpp/cgi-bin/&amp;protein={$mult_prot}&amp;peptide_string={$peptide_string}&amp;ratio={$xratio}&amp;stddev={$xstd}&amp;num={$xnum}&amp;xmlfile=/work/tpp-data/interact-opd1_mods-prot.xml&amp;min_pep_prob={$min_pep_prob}&amp;source_files={$source}&amp;heavy2light=0"><xsl:if test="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@ratio_mean &lt;'0'">N_A</xsl:if><xsl:if test="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@ratio_mean &gt;='0'"><b><xsl:value-of select="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@ratio_mean"/></b>  +- <xsl:value-of select="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@ratio_standard_dev"/>(<xsl:value-of select="protx:analysis_result[@analysis='xpress']/protx:XPressRatio/@ratio_number_peptides"/>)</xsl:if></a></xsl:if><xsl:if test="not(protx:analysis_summary[@analysis='xpress'])"><xsl:text>     </xsl:text></xsl:if></td></xsl:if><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='asapratio']"><td width="350"><xsl:if test="protx:analysis_result[@analysis='asapratio']">ASAPRatio: <A NAME="ASAPRatio_proRatio" TARGET="WIN3" HREF="/tpp/cgi-bin/ASAPCGIDisplay.cgi?ratioType=0&amp;xmlFile=/work/tpp-data/interact-opd1_mods-prot.xml&amp;protein={$mult_prot}"><xsl:if test="protx:analysis_result[@analysis='asapratio']/protx:ASAPRatio/@ratio_mean &lt;'0'">N_A</xsl:if><xsl:if test="protx:analysis_result[@analysis='asapratio']/protx:ASAPRatio/@ratio_mean &gt;='0'"><b><xsl:value-of select="protx:analysis_result[@analysis='asapratio']/protx:ASAPRatio/@ratio_mean"/></b>  +- <xsl:value-of select="protx:analysis_result[@analysis='asapratio']/protx:ASAPRatio/@ratio_standard_dev"/></xsl:if><xsl:if test="protx:analysis_result[@analysis='asapratio']/protx:ASAPRatio/@ratio_number_peptides">(<xsl:value-of select="protx:analysis_result[@analysis='asapratio']/protx:ASAPRatio/@ratio_number_peptides"/>)</xsl:if></A><xsl:if test="protx:analysis_result[@analysis='asapratio_pvalue']">[<xsl:value-of select="protx:analysis_result[@analysis='asapratio_pvalue']/protx:ASAPRatio_pvalue/@adj_ratio_mean"/>  +- <xsl:value-of select="protx:analysis_result[@analysis='asapratio_pvalue']/protx:ASAPRatio_pvalue/@adj_ratio_standard_dev"/>]</xsl:if></xsl:if></td></xsl:if><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='asapratio_pvalue']"><td width="200"><xsl:if test="protx:analysis_result[@analysis='asapratio_pvalue'] and protx:analysis_result[@analysis='asapratio_pvalue']/protx:ASAPRatio_pvalue/@pvalue">pvalue: <a target="Win1" href="{$pvalpngfile}"><nobr><xsl:value-of select="protx:analysis_result[@analysis='asapratio_pvalue']/protx:ASAPRatio_pvalue/@pvalue"/></nobr></a></xsl:if></td></xsl:if><td width="225">num unique peps: <xsl:value-of select="count(protx:peptide[@is_contributing_evidence='Y'])"/></td><td width="225">tot num peps: <xsl:value-of select="@total_number_peptides"/></td><td width="225"><xsl:if test="@pct_spectrum_ids">share of spectrum id's: <xsl:value-of select="@pct_spectrum_ids"/>%</xsl:if></td><xsl:variable name="myprotein3" select="@protein_name"/><xsl:variable name="mychildren" select="count(/protx:protein_summary/protx:protein_group/protx:protein[@group_sibling_id = 'a' and @subsuming_protein_entry and @subsuming_protein_entry=$myprotein3])"/><td><xsl:if test="$mychildren &gt; '0'"><A Target="Win1" HREF="/tpp/cgi-bin/findsubsets.pl?Protein={$myprotein3}&amp;Xmlfile=/work/tpp-data/interact-opd1_mods-prot.xml&amp;Xslt=/bin/nice -19 /usr/bin/xsltproc&amp;xml_input=1">subsumed entries: <xsl:value-of select="$mychildren"/></A></xsl:if></td></tr></table></td></tr><xsl:if test="protx:annotation"><tr><td><xsl:text>     </xsl:text></td><td colspan="10"><font color="green">&gt;</font><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@organism"><xsl:if test="annotation/@ipi_name"><xsl:variable name="ipi" select="annotation/@ipi_name"/><a TARGET="Win1" href="http://srs.ebi.ac.uk/srs7bin/cgi-bin/wgetz?-id+m_RJ1KrMXG+-e+IPI:{$ipi}"><font color="green">IPI:<xsl:value-of select="$ipi"/></font></a><xsl:text> </xsl:text> </xsl:if></xsl:if><xsl:if test="protx:annotation/@protein_description"><xsl:if test="not(/protx:protein_summary/protx:protein_summary_header/@organism)"><font color="green"><xsl:value-of select="protx:annotation/@protein_description"/></font></xsl:if><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@organism"><font color="#008080"><xsl:value-of select="protx:annotation/@protein_description"/></font></xsl:if><xsl:text> </xsl:text> </xsl:if><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@organism"><xsl:if test="protx:annotation/@ensembl_name"><xsl:variable name="org" select="/protx:protein_summary/protx:protein_summary_header/@organism"/><xsl:variable name="ensembl" select="protx:annotation/@ensembl_name"/><a TARGET="Win1" href="http://www.ensembl.org/{$org}/protview?peptide={$ensembl}"><font color="green">E:<xsl:value-of select="$ensembl"/></font></a><xsl:text> </xsl:text> </xsl:if><xsl:if test="protx:annotation/@trembl_name"><font color="green">Tr:<xsl:value-of select="protx:annotation/@trembl_name"/></font><xsl:text> </xsl:text> </xsl:if><xsl:if test="protx:annotation/@swissprot_name"><font color="green">Sw:<xsl:value-of select="protx:annotation/@swissprot_name"/></font><xsl:text> </xsl:text> </xsl:if><xsl:if test="protx:annotation/@refseq_name"><font color="green">Ref:<xsl:value-of select="protx:annotation/@refseq_name"/></font><xsl:text> </xsl:text> </xsl:if><xsl:if test="protx:annotation/@locus_link_name"><xsl:variable name="loc" select="protx:annotation/@locus_link_name"/><a TARGET="Win1" href="http://www.ncbi.nlm.nih.gov/LocusLink/LocRpt.cgi?l={$loc}"><font color="green">LL:<xsl:value-of select="$loc"/></font></a><xsl:text> </xsl:text> </xsl:if><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@organism='Drosophila'"><xsl:if test="protx:annotation/@flybase"><xsl:variable name="flybase" select="protx:annotation/@flybase"/><a TARGET="Win1" href="http://flybase.bio.indiana.edu/.bin/fbidq.html?{$flybase}"><font color="green">Flybase:<xsl:value-of select="$flybase"/></font></a><xsl:text> </xsl:text> </xsl:if></xsl:if></xsl:if></td></tr></xsl:if><xsl:for-each select="protx:indistinguishable_protein"><xsl:if test="protx:annotation"><tr><td><xsl:text>     </xsl:text></td><td colspan="10"><font color="green">&gt;</font><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@organism"><xsl:if test="annotation/@ipi_name"><xsl:variable name="ipi" select="annotation/@ipi_name"/><a TARGET="Win1" href="http://srs.ebi.ac.uk/srs7bin/cgi-bin/wgetz?-id+m_RJ1KrMXG+-e+IPI:{$ipi}"><font color="green">IPI:<xsl:value-of select="$ipi"/></font></a><xsl:text> </xsl:text> </xsl:if></xsl:if><xsl:if test="protx:annotation/@protein_description"><xsl:if test="not(/protx:protein_summary/protx:protein_summary_header/@organism)"><font color="green"><xsl:value-of select="protx:annotation/@protein_description"/></font></xsl:if><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@organism"><font color="#008080"><xsl:value-of select="protx:annotation/@protein_description"/></font></xsl:if><xsl:text> </xsl:text> </xsl:if><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@organism"><xsl:if test="protx:annotation/@ensembl_name"><xsl:variable name="org" select="/protx:protein_summary/protx:protein_summary_header/@organism"/><xsl:variable name="ensembl" select="protx:annotation/@ensembl_name"/><a TARGET="Win1" href="http://www.ensembl.org/{$org}/protview?peptide={$ensembl}"><font color="green">E:<xsl:value-of select="$ensembl"/></font></a><xsl:text> </xsl:text> </xsl:if><xsl:if test="protx:annotation/@trembl_name"><font color="green">Tr:<xsl:value-of select="protx:annotation/@trembl_name"/></font><xsl:text> </xsl:text> </xsl:if><xsl:if test="protx:annotation/@swissprot_name"><font color="green">Sw:<xsl:value-of select="protx:annotation/@swissprot_name"/></font><xsl:text> </xsl:text> </xsl:if><xsl:if test="protx:annotation/@refseq_name"><font color="green">Ref:<xsl:value-of select="protx:annotation/@refseq_name"/></font><xsl:text> </xsl:text> </xsl:if><xsl:if test="protx:annotation/@locus_link_name"><xsl:variable name="loc" select="protx:annotation/@locus_link_name"/><a TARGET="Win1" href="http://www.ncbi.nlm.nih.gov/LocusLink/LocRpt.cgi?l={$loc}"><font color="green">LL:<xsl:value-of select="$loc"/></font></a><xsl:text> </xsl:text> </xsl:if><xsl:if test="/protx:protein_summary/protx:protein_summary_header/@organism='Drosophila'"><xsl:if test="protx:annotation/@flybase"><xsl:variable name="flybase" select="protx:annotation/@flybase"/><a TARGET="Win1" href="http://flybase.bio.indiana.edu/.bin/fbidq.html?{$flybase}"><font color="green">Flybase:<xsl:value-of select="$flybase"/></font></a><xsl:text> </xsl:text> </xsl:if></xsl:if></xsl:if></td></tr></xsl:if></xsl:for-each><tr><td><!-- header --></td><td></td><td><font color="brown"><i>weight</i></font></td><td><font color="brown"><i>peptide sequence</i></font></td><td><font color="brown"><i>nsp adj prob</i></font></td><td><font color="brown"><i>init prob</i></font></td><td><font color="brown"><i>ntt</i></font></td><td><font color="brown"><i>nsp<xsl:if test="not(protx:peptide/@n_sibling_peptides)"> bin</xsl:if></i></font></td><td><font color="brown"><i>total</i></font></td><td><font color="brown"><i>pep grp ind</i></font></td><td><xsl:text>     </xsl:text></td></tr><xsl:apply-templates select="protx:peptide"><xsl:sort select = "@nsp_adjusted_probability" order="descending" data-type="number"/><xsl:with-param name="pvalpngfile" select="$pvalpngfile"/><xsl:with-param name="mult_prot" select="$mult_prot"/><xsl:with-param name="peptide_string" select="$peptide_string"/><xsl:with-param name="xratio" select="$xratio"/><xsl:with-param name="xstd" select="$xstd"/><xsl:with-param name="xnum" select="$xnum"/><xsl:with-param name="min_pep_prob" select="$min_pep_prob"/><xsl:with-param name="source" select="$source"/></xsl:apply-templates></xsl:template><xsl:template match="protx:peptide"><xsl:param name="pvalpngfile"/><xsl:param name="mult_prot"/><xsl:param name="peptide_string"/><xsl:param name="xratio"/><xsl:param name="xstd"/><xsl:param name="xnum"/><xsl:param name="min_pep_prob"/><xsl:param name="source"/><xsl:variable name="mypep"><xsl:if test="@pound_subst_peptide_sequence"><xsl:value-of select="@pound_subst_peptide_sequence"/></xsl:if><xsl:if test="not(@pound_subst_peptide_sequence)"><xsl:value-of select="@peptide_sequence"/></xsl:if></xsl:variable><xsl:variable name="mycharge" select="@charge"/><xsl:variable name="PepMass"><xsl:if test="@calc_neutral_pep_mass"><xsl:value-of select="@calc_neutral_pep_mass"/></xsl:if></xsl:variable><xsl:variable name="StdPep"><xsl:if test="protx:modification_info and protx:modification_info/@modified_peptide"><xsl:value-of select="protx:modification_info/@modified_peptide"/></xsl:if></xsl:variable><xsl:variable name="myinputfiles" select="/protx:protein_summary/protx:protein_summary_header/@source_files_alt"/><xsl:variable name="myprots"><xsl:value-of select="parent::node()/@protein_name"/><xsl:for-each select="parent::node()/protx:indistinguishable_protein"><xsl:text> </xsl:text><xsl:value-of select="@protein_name"/></xsl:for-each></xsl:variable><xsl:variable name="nspbin" select="@n_sibling_peptides_bin"/><xsl:variable name="nspval" select="@n_sibling_peptides"/><xsl:variable name="ratiotype"><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress'] or /protx:protein_summary/protx:analysis_summary[@analysis='asapratio']">0</xsl:if><xsl:if test="not(/protx:protein_summary/protx:analysis_summary[@analysis='xpress']) and not(/protx:protein_summary/protx:analysis_summary[@analysis='asapratio'])">-1</xsl:if></xsl:variable><xsl:variable name="amp"><xsl:text><![CDATA[&]]></xsl:text></xsl:variable><tr><td><xsl:text>     </xsl:text></td><td><xsl:if test="@is_nondegenerate_evidence = 'Y'"><font color="#990000">*</font></xsl:if></td><td><A TARGET="Win1" HREF="/tpp/cgi-bin/prot_wt_xml.pl?xmlfile=/work/tpp-data/interact-opd1_mods-prot.xml&amp;cgi-home=/tpp/cgi-bin/&amp;xslt=/bin/nice -19 /usr/bin/xsltproc&amp;quant_light2heavy=true&amp;modpep={$StdPep}&amp;pepmass={$PepMass}&amp;xml_input=1&amp;peptide={$mypep}&amp;charge={$mycharge}&amp;"><nobr>wt-<xsl:value-of select="@weight"/><xsl:text> </xsl:text></nobr></A></td><td><A TARGET="Win1" HREF="/tpp/cgi-bin/peptidexml_html2.pl?PepMass={$PepMass}&amp;StdPep={$StdPep}&amp;MassError=0.5&amp;xslt=/bin/nice -19 /usr/bin/xsltproc&amp;cgi-bin=/tpp/cgi-bin/&amp;ratioType={$ratiotype}&amp;libra={$libra_quant}&amp;Ref={$mycharge}_{$mypep}&amp;Infile={$myinputfiles}"><xsl:value-of select="@charge"/>_<xsl:if test="protx:modification_info"><xsl:if test="protx:modification_info/@modified_peptide"><xsl:value-of select="protx:modification_info/@modified_peptide"/></xsl:if><xsl:if test="not(protx:modification_info/@modified_peptide)"><xsl:value-of select="@peptide_sequence"/><xsl:if test="protx:modification_info/@mod_nterm_mass">n[<xsl:value-of select="protx:modification_info/@mod_nterm_mass"/>]</xsl:if><xsl:for-each select="protx:modification_info/protx:mod_aminoacid_mass"><xsl:value-of select="@position"/>[<xsl:value-of select="@mass"/>]</xsl:for-each><xsl:if test="protx:modification_info/@mod_cterm_mass">c[<xsl:value-of select="protx:modification_info/@mod_cterm_mass"/>]</xsl:if></xsl:if></xsl:if><xsl:if test="not(protx:modification_info)"><xsl:value-of select="@peptide_sequence"/></xsl:if></A></td><td><xsl:if test="@is_contributing_evidence = 'Y'"><font COLOR="#FF9933"><xsl:value-of select="@nsp_adjusted_probability"/></font></xsl:if><xsl:if test="@is_contributing_evidence = 'N'"><xsl:value-of select="@nsp_adjusted_probability"/></xsl:if></td><td><xsl:value-of select="@initial_probability"/></td><td><xsl:value-of select="@n_enzymatic_termini"/></td><td><xsl:if test="@n_sibling_peptides"><A TARGET="Win1" HREF="/tpp/cgi-bin/show_nspbin.pl?xmlfile=/work/tpp-data/interact-opd1_mods-prot.xml&amp;xslt=/bin/nice -19 /usr/bin/xsltproc&amp;nsp_bin={$nspbin}&amp;nsp_val={$nspval}&amp;charge={$mycharge}&amp;pep={$mypep}&amp;prot={$myprots}"><xsl:value-of select="@n_sibling_peptides"/></A></xsl:if>
<xsl:if test="not(@n_sibling_peptides)"><xsl:value-of select="@n_sibling_peptides_bin"/></xsl:if></td><td><xsl:value-of select="@n_instances"/></td><td><xsl:if test="@peptide_group_designator"><font color="#DD00DD"><xsl:value-of select="@peptide_group_designator"/>-<xsl:value-of select="@charge"/></font></xsl:if></td></tr><xsl:apply-templates select="protx:indistinguishable_peptide"/></xsl:template><xsl:template match="protx:indistinguishable_peptide"><xsl:variable name="mycharge2" select="parent::node()/@charge"/><xsl:variable name="mypep2"><xsl:if test="@pound_subst_peptide_sequence"><xsl:value-of select="@pound_subst_peptide_sequence"/></xsl:if><xsl:if test="not(@pound_subst_peptide_sequence)"><xsl:value-of select="@peptide_sequence"/></xsl:if></xsl:variable><xsl:variable name="myinputfiles2" select="/protx:protein_summary/protx:protein_summary_header/@source_files_alt"/><xsl:variable name="ratiotype2"><xsl:if test="/protx:protein_summary/protx:analysis_summary[@analysis='xpress'] or /protx:protein_summary/protx:analysis_summary[@analysis='asapratio']">0</xsl:if><xsl:if test="not(/protx:protein_summary/protx:analysis_summary[@analysis='xpress']) and not(/protx:protein_summary/protx:analysis_summary[@analysis='asapratio'])">-1</xsl:if></xsl:variable><tr><td><xsl:text>     </xsl:text></td><td></td><td></td><td>--<A TARGET="Win1" HREF="/tpp/cgi-bin/peptidexml_html2.pl?xslt=/bin/nice -19 /usr/bin/xsltproc&amp;cgi-bin=/tpp/cgi-bin/&amp;ratioType={$ratiotype2}&amp;Ref={$mycharge2}_{$mypep2}&amp;Infile={$myinputfiles2}"><xsl:value-of select="parent::node()/@charge"/>_<xsl:value-of select="@peptide_sequence"/></A></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></xsl:template></xsl:stylesheet>

